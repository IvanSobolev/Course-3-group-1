CREATE TABLE ReservationAttempts (
    attempt_id INTEGER PRIMARY KEY AUTOINCREMENT,
    seat_id INTEGER,
    attempt_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    status TEXT,
    error TEXT
);

BEGIN IMMEDIATE TRANSACTION;
SELECT * FROM Seats WHERE seat_id = 3 AND is_reserved = 0;
UPDATE Seats SET is_reserved = 1 WHERE seat_id = 3;
INSERT INTO Reservations (seat_id, reserved_at) VALUES (?, CURRENT_TIMESTAMP);
INSERT INTO ReservationAttempts (seat_id, attempt_time, status) VALUES (3, CURRENT_TIMESTAMP, 'SUCCESS');
COMMIT;