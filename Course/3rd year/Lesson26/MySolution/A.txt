CREATE TABLE Seats (
    seat_id INTEGER PRIMARY KEY,
    is_reserved INTEGER DEFAULT 0
);

CREATE TABLE Reservations (
    reservation_id INTEGER PRIMARY KEY AUTOINCREMENT,
    seat_id INTEGER,
    reserved_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

INSERT INTO Seats (is_reserved) VALUES (0), (0), (0), (0), (0);

BEGIN TRANSACTION;
SELECT * FROM Seats WHERE seat_id = 2 AND is_reserved = 0;
UPDATE Seats SET is_reserved = 1 WHERE seat_id = 2;
INSERT INTO Reservations (seat_id, reserved_at) VALUES (2, CURRENT_TIMESTAMP);
COMMIT;